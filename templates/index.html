{% extends 'base.html' %}
{% block title %}Pattern Finder â€” Scanner{% endblock %}
{% block head_extra %}
  <script src="{{ url_for('static', path='js/htmx.min.js') }}" defer></script>
  <script src="{{ url_for('static', path='js/scanner.js') }}" defer></script>
{% endblock %}
{% block content %}
  <div class="card">
    <h1 style="margin:0 0 1rem 0">Scanner</h1>
    <form id="scan-form" action="{{ url_for('scanner_run') }}" method="post">
      {% include '_scanner_form.html' %}

      <div class="actions">
        <button type="submit">Run Scan</button>
        <span class="note">Results appear below with sortable buttons.</span>
      </div>

      <div class="actions" style="margin-top:1rem;">
        <button type="submit" name="sort" value="ticker">Sort: Ticker</button>
        <button type="submit" name="sort" value="roi">Sort: ROI</button>
        <button type="submit" name="sort" value="hit">Sort: Hit%</button>
      </div>
    </form>

    <div class="results-card">
      <h2 style="margin:0 0 .5rem 0">Results</h2>
      <div id="scan-results">
        <p>No results.</p>
      </div>
    </div>
  </div>
{% endblock %}
{% block extra_body %}
  <div id="scan-overlay">
    <div class="box">
      <div id="progress-bar"><div id="progress-fill"></div></div>
      <div id="progress-text">0%</div>
      <div id="progress-status"></div>
    </div>
  </div>
{% endblock %}
