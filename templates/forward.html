{% extends 'base.html' %}
{% block title %}Pattern Finder â€” Forward Test{% endblock %}
{% block content %}
  <div class="card">
    <h1 style="margin-top:0;">Forward Test</h1>
    {% if error %}
    <p class="error">{{ error }}</p>
    {% endif %}
    {% if tests and tests|length %}
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Ticker</th>
          <th>Direction</th>
          <th>Interval</th>
          <th>ROI%</th>
          <th>Hit%</th>
          <th>DD%</th>
          <th>Status</th>
          <th>Start</th>
          <th>Rule</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for f in tests %}
        <tr>
          <td>{{ f["ft_id"] }}</td>
          <td><strong>{{ f["ticker"] }}</strong></td>
          <td>{{ f["direction"] }}</td>
          <td>{{ f["interval"] }}</td>
          <td>{{ '{:.1f}'.format(f['roi_forward']) if f['roi_forward'] is not none else '' }}</td>
          <td>{{ '{:.0f}'.format(f['hit_forward']) if f['hit_forward'] is not none else '' }}</td>
          <td>{{ '{:.1f}'.format(f['dd_forward']) if f['dd_forward'] is not none else '' }}</td>
          <td>{{ f['status'] }}</td>
          <td>{{ f["created_at"][:16] if f["created_at"] else '' }}</td>
          <td><code>{{ f["rule"] }}</code></td>
          <td>
            <form method="post" action="/favorites/delete/{{ f['fav_id'] }}" style="margin:0;">
              <button type="submit" class="del-btn">&#10005;</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p>No favorites to test.</p>
    {% endif %}
  </div>
{% endblock %}
